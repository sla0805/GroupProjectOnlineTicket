@model OnlineTicket.Models.CustomerDashboardVM
@{
    ViewData["Title"] = "Customer Dashboard";
}

<script src="https://cdn.tailwindcss.com"></script>

<div class="container mx-auto py-10 px-4">
    <!-- Header -->
    <div class="flex justify-between items-center mb-8">
        <h2 class="text-3xl font-bold text-gray-800">Welcome to your Dashboard</h2>
        <span class="text-gray-500">@DateTime.Now.ToString("MMMM dd, yyyy")</span>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="bg-white shadow rounded-2xl p-6 text-center">
            <h5 class="text-gray-500 uppercase text-sm font-semibold">Total Bookings</h5>
            <h2 class="text-4xl font-bold mt-4">@Model.TotalBookings</h2>
        </div>
        <div class="bg-white shadow rounded-2xl p-6 text-center">
            <h5 class="text-gray-500 uppercase text-sm font-semibold">Upcoming Events</h5>
            <h2 class="text-4xl font-bold mt-4">@Model.UpcomingEvents.Count</h2>
        </div>
        <div class="bg-white shadow rounded-2xl p-6 text-center">
            <h5 class="text-gray-500 uppercase text-sm font-semibold">Recent Bookings</h5>
            <h2 class="text-4xl font-bold mt-4">@Model.RecentBookings.Count</h2>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="mb-8">
        <div class="bg-white shadow rounded-2xl p-6 flex flex-wrap justify-center gap-4">
            <a asp-controller="Event" asp-action="Index" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-full flex items-center gap-2 shadow">
                <i class="bi bi-search"></i> Browse Events
            </a>
            <a asp-controller="Booking" asp-action="MyBookings" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-full flex items-center gap-2 shadow">
                <i class="bi bi-card-list"></i> My Booking List
            </a>
            <a asp-controller="Customer" asp-action="Profile" class="bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-6 rounded-full flex items-center gap-2 shadow">
                <i class="bi bi-person-circle"></i> Edit Profile
            </a>
        </div>
    </div>

    <!-- Recent Bookings Table -->
    <div class="bg-white shadow rounded-2xl p-6">
        <h5 class="text-lg font-bold mb-4">Recent Bookings</h5>

        @if (Model.RecentBookings.Count == 0)
        {
            <div class="text-center py-10 text-gray-500">
                <p>You have no recent bookings.</p>
            </div>
        }
        else
        {
            <div class="overflow-x-auto">
                <table class="min-w-full table-auto divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Event</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Booking Date</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Payment Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tickets</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        @foreach (var booking in Model.RecentBookings)
                        {
                            <tr>
                                <td class="px-6 py-4 font-semibold text-blue-600">@booking.Event.Title</td>
                                <td class="px-6 py-4">@booking.CreatedAt.ToString("MMM dd, yyyy")</td>
                                <td class="px-6 py-4">
                                    <span class="inline-block px-3 py-1 text-sm font-medium text-gray-800 bg-gray-100 rounded-full">
                                        @booking.BookingStatus
                                    </span>
                                </td>
                                <td class="px-6 py-4">@booking.Tickets.Count</td>
                                <td class="px-6 py-4">
                                    <a asp-controller="Booking" asp-action="MyBookings" asp-route-id="@booking.BookingId" class="inline-block px-4 py-2 text-sm font-medium text-blue-600 border border-blue-600 rounded-full hover:bg-blue-600 hover:text-white transition">
                                        View
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
    </div>
</div>
