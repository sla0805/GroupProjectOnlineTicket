@model OnlineTicket.Models.Event
@{
    ViewData["Title"] = "Add Ticket Types";
}

<div class="max-w-5xl mx-auto p-6">
    <h1 class="text-2xl font-bold mb-6 text-indigo-600">Ticket Types for "@Model.Title"</h1>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="bg-green-100 text-green-800 p-3 rounded mb-4">@TempData["SuccessMessage"]</div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="bg-red-100 text-red-800 p-3 rounded mb-4">@TempData["ErrorMessage"]</div>
    }

    <!-- Existing Ticket Types -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        @foreach (var tt in Model.TicketTypes)
        {
            <div class="bg-white p-4 rounded shadow flex flex-col justify-between">
                <div>
                    <h2 class="font-semibold text-lg">@tt.Name</h2>
                    <p class="text-gray-600 mt-1">Price: @tt.Price.ToString("C")</p>
                    <p class="text-gray-600 mt-1">Total Seats: @tt.TotalSeats</p>
                    <p class="text-gray-600 mt-1">Sold: @(tt.Tickets?.Count ?? 0)</p>
                </div>

                <div class="flex justify-between mt-4">
                    <a asp-action="EditTicketTypes" asp-route-eventId="@Model.EventId" class="px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600 w-full text-center">Edit</a>

                    <form asp-action="DeleteTicketType" method="post" onsubmit="return confirm('Are you sure you want to delete this ticket type?');">
                        <input type="hidden" name="ticketTypeId" value="@tt.TicketTypeId" />
                        <button type="submit" class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 w-full">Delete</button>
                    </form>
                </div>
            </div>
        }
    </div>

    <!-- Add New Ticket Type Form -->
    <div class="bg-white p-6 rounded shadow">
        <h2 class="text-xl font-semibold mb-4">Add New Ticket Type</h2>
        <form asp-action="AddTicketTypes" method="post" class="space-y-4">
            <input type="hidden" name="eventId" value="@Model.EventId" />

            <div>
                <label class="block font-semibold">Ticket Type Name</label>
                <input name="name" class="w-full border px-3 py-2 rounded" required />
            </div>

            <div>
                <label class="block font-semibold">Price</label>
                <input name="price" type="number" step="0.01" min="0" class="w-full border px-3 py-2 rounded" required />
            </div>

            <div>
                <label class="block font-semibold">Total Seats</label>
                <input name="totalSeats" type="number" min="0" class="w-full border px-3 py-2 rounded" required />
            </div>

            <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">Add Ticket Type</button>
        </form>
    </div>

    <div class="mt-6">
        <a asp-action="Events" class="px-4 py-2 border rounded text-gray-700 hover:bg-gray-100">Events Lists</a>
    </div>

</div>
