@model OnlineTicket.Models.Booking
@{
    ViewBag.Title = "Booking Details";
}

<div class="container mx-auto py-10 px-4">

    <!-- Header -->
    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-800 mb-3 md:mb-0">Booking Details</h2>
        <a asp-controller="Booking" asp-action="MyBookings"
           class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-full text-gray-700 text-sm font-medium hover:bg-gray-100 transition">
            <i class="bi bi-arrow-left mr-1"></i> Back to My Bookings
        </a>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">

        <!-- Left Column: Booking & Payment Info -->
        <div class="lg:col-span-4 space-y-4">

            <!-- Booking Info -->
            <div class="bg-white shadow rounded-xl p-5">
                <h5 class="text-lg font-bold text-gray-800 mb-4 border-b border-gray-200 pb-2">Booking Information</h5>
                <ul class="space-y-2">
                    <li><strong>Event:</strong> @Model.Event.Title</li>
                    <li><strong>Quantity:</strong> @Model.Quantity</li>
                    <li><strong>Total Amount:</strong> @Model.TotalAmount.ToString("C")</li>
                    <li>
                        <strong>Status:</strong>
                        @if (Model.BookingStatus == "Pending")
                        {
                            <span class="inline-block px-3 py-1 text-yellow-800 bg-yellow-200 rounded-full text-sm font-semibold">Pending</span>
                        }
                        else
                        {
                            <span class="inline-block px-3 py-1 text-white bg-green-600 rounded-full text-sm font-semibold">Confirmed</span>
                        }
                    </li>
                    <li><strong>Booking Date:</strong> @Model.CreatedAt.ToString("MMM dd, yyyy")</li>
                </ul>
            </div>

            <!-- Payment Info -->
            <div class="bg-white shadow rounded-xl p-5">
                <h5 class="text-lg font-bold text-gray-800 mb-4 border-b border-gray-200 pb-2">Payment Information</h5>
                @if (Model.Payment != null)
                {
                    <ul class="space-y-2">
                        <li><strong>Payment Method:</strong> @Model.Payment.PaymentMethod</li>
                        <li><strong>Amount Paid:</strong> @Model.TotalAmount.ToString("C")</li>
                        <li>
                            <strong>Status:</strong>
                            @if (Model.Payment.PaymentStatus == "Paid")
                            {
                                <span class="inline-block px-3 py-1 text-white bg-green-600 rounded-full text-sm font-semibold">Paid</span>
                            }
                            else
                            {
                                <span class="inline-block px-3 py-1 text-yellow-800 bg-yellow-200 rounded-full text-sm font-semibold">Pending</span>
                            }
                        </li>
                        <li><strong>Payment Date:</strong> @Model.Payment.PaymentDate.ToString("MMM dd, yyyy HH:mm")</li>
                    </ul>
                }
                else
                {
                    <p class="text-gray-500">No payment information available.</p>
                }
            </div>

        </div>

        <!-- Right Column: Tickets -->
        <div class="lg:col-span-8">
            <div class="bg-white shadow rounded-xl p-5">
                <h5 class="text-lg font-bold text-gray-800 mb-4 border-b border-gray-200 pb-2">Tickets</h5>
                @if (Model.Tickets != null && Model.Tickets.Any())
                {
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        @foreach (var ticket in Model.Tickets)
                        {
                            <div class="bg-gray-50 rounded-lg shadow p-4 flex flex-col items-center text-center">
                                <h6 class="font-bold text-blue-600 mb-2">@ticket.TicketType.Name</h6>
                                <p class="text-gray-500 mb-2">Ticket ID: @ticket.TicketId</p>
                                <img src="@ticket.QrBase64" alt="QR Code" class="w-36 h-36 mb-2 object-contain">
                                <p class="text-gray-500 text-sm">Event: @ticket.Event.Title</p>
                            </div>
                        }
                    </div>
                }
                else
                {
                    <p class="text-gray-500 text-center py-10">No tickets available for this booking.</p>
                }
            </div>
        </div>

    </div>
</div>
